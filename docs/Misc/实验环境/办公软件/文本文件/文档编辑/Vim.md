一个高效的文本编辑器.

## 1. 安装

添加到环境变量并取消创建桌面图标

![添加到环境变量并取消创建桌面图标](./../../../../../../images/Vim/%E6%B7%BB%E5%8A%A0%E5%88%B0%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%B9%B6%E5%8F%96%E6%B6%88%E5%88%9B%E5%BB%BA%E6%A1%8C%E9%9D%A2%E5%9B%BE%E6%A0%87.png)

## 2. 初始化

取消生成文件备份和操作记录

记事本使用管理员模式打开 `C:\Program Files\Vim\_vimrc` 并在文件末尾添加

```
set noundofile
set nobackup
set noswapfile
```

## 3. 使用

Vim 使用方法

![Vim 使用方法](./../../../../../../images/Vim/Vim%20%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95.jpg)

## 4. 操作模式

| 操作                                                | 描述       |
| --------------------------------------------------- | ---------- |
| 按下 `Esc` 键后出现 `Normal/正常`                   | 正常模式   |
| 输入 `:` 后出现 `:`                                 | 命令行模式 |
| 按下 `a` `i` `o` `A` `I` `O` 键后出现 `Insert/插入` | 插入模式   |
| 按下 `Ctrl+V` 后出现 `Visual/可视块`                | 可视块模式 |
| 按下 `R` 键后出现 `Replace/替换`                    | 替换模式   |

## 5. 常用命令

| 操作                 | 描述                                                         |
| -------------------- | ------------------------------------------------------------ |
| vim + /a.txt         | 打开文件后，光标会自动位于文件的最后一行                     |
| vim +23 /a.txt       | 打开文件后，光标会自动位于文件的第23行                       |
| vim -o /a.txt /b,txt | 上下打开两个文档                                             |
| vim -O /a.txt /b.txt | 左右打开两个文档                                             |
| 命令行模式下输入：qa | 一次性退出所有打开的文件                                     |
| ctrl+ww              | 在两文档间进行切换                                           |
| vimdiff a.txt b.txt  | 对比文件(会左右分屏输出两个文档的完全对比，其中不同部分会高亮显示) |

## 6. 正常模式

开启

| 操作                                | 描述                                    |
| ----------------------------------- | --------------------------------------- |
| 首次进入文件或在其它模式下按下Esc键 | 进入正常模式(Normal mode，俗称命令模式) |

光标定位

| 操作        | 描述                 |
| ----------- | -------------------- |
| h/j/k/l     | 左下上右             |
| 0 和 Home   | 切换到行首           |
| $ 和 End    | 切换到行尾           |
| gg          | 定位到首行，相当于1G |
| G           | 定位到未行           |
| 3gg  或  3G | 快速定位到第  3  行  |

查找内容

| 操作            | 描述                                            |
| --------------- | ----------------------------------------------- |
| /string(字符串) | 高亮显示查找的内容，并用 N/n 来进行向上向下查找 |
| :noh            | 取消高亮                                        |
| /^ab            | ^表示以什么开头，查找以字母 ab 开头的内容       |
| /ab$            | $表示以什么结尾，查找以字母 ab 结尾的内容       |

在正常模式对文本进行编辑

| 操作   | 描述                    |
| ------ | ----------------------- |
| yy     | 复制整行                |
| Nyy    | 复制 N 行               |
| dd     | 剪切/删除当前光标所在行 |
| Ndd    | 剪切/删除 N 行          |
| x      | 删除光标所在位置的字符  |
| X      | 向前删除一个字符        |
| D      | 从光标处删除到行尾      |
| p      | 粘贴                    |
| u      | 撤销操作                |
| Ctrl+r | 还原撤销过的操作        |
| r      | 替换                    |
| ZZ     | 保存并退出              |

进入其它模式

| 操作        | 描述                 |
| ----------- | -------------------- |
| a/A/o/O/i/I | 都是可以进行插入模式 |
| ：          | 进入命令行模式       |
| Ctrl+v      | 进入可视块模式       |
| R           | 进入替换模式         |
| Esc         | 退出以上模式         |

## 7. 插入模式

| 操作   | 描述                               |
| ------ | ---------------------------------- |
| i      | 光标前插入                         |
| I      | 行首插入                           |
| a      | 光标后插入                         |
| A      | 行尾插入                           |
| o      | 另起一行插入                       |
| O      | 上一行插入                         |
| x      | 向后删除一个字符，等同于 delete    |
| X      | 向前删除一个字符                   |
| u      | 撤销一步，每按一次就撤销一次       |
| Ctrl+r | 恢复，每按一次就恢复一次撤销的内容 |
| r      | 替换                               |

## 8. 可视块模式

需要进行多行注释时，可使用可视块模式

| 操作                                                         | 描述                      |
| ------------------------------------------------------------ | ------------------------- |
| 批量删除：按 Ctrl+v 进入可视块模式，移动光标，选中内容，然后按 d/Del | 就会删除，再按Esc，生效   |
| 批量插入：按 Ctrl+v 进入可视块模式，移动光标，选中内容，然后按 I | 就可以输入，再按Esc，生效 |

## 9. 命令行模式

### 9.1 基础命令

| 操作 | 描述                                 |
| ---- | ------------------------------------ |
| :w   | 保存                                 |
| :w!  | 强制保存                             |
| :q   | 退出                                 |
| :q!  | 强制退出，不保存                     |
| :x   | 保存退出，未更新情况下不更新修改时间 |
| :wq  | 保存退出，未更新情况下更新修改时间   |
| :wq! | 强制保存，并退出                     |
| :e!  | 恢复                                 |

### 9.2 调用外部文件或命令

| 操作          | 描述                                |
| ------------- | ----------------------------------- |
| :! 命令       | 调用外部命令                        |
| :r /etc/a.txt | 把a.txt文件中的内容追加到当前文档中 |

### 9.3 输出内容

### 9.3.1 另存

| 操作          | 描述                              |
| ------------- | --------------------------------- |
| :4w a.txt     | 将第四行内容另存到a.txt           |
| :4,$w a.txt   | 将第四行到最后一行内容另存到a.txt |
| :/666/w a.txt | 将第一个含有666的行另存到a.txt中  |

### 9.3.2 打印

| 操作          | 描述                     |
| ------------- | ------------------------ |
| :p            | 打印光标所在行内容       |
| :%p           | 打印全部内容             |
| :4p           | 打印第四行内容           |
| :$p           | 打印最后一行内容         |
| :4,$p         | 打印第四行到最后一行内容 |
| :/aaa/,/666/p | 打印从aaa到666的内容     |

### 9.4 文本编辑

### 9.4.1 插入

| 操作      | 描述                        |
| :-------- | :-------------------------- |
| :4r a.txt | 在第四行后插入a.txt的内容   |
| :$r a.txt | 在最后一行后插入a.txt的内容 |

### 9.4.2 删除

| 操作  | 描述                       |
| :---- | :------------------------- |
| :d    | 删除光标所在行的内容       |
| :4d   | 删除第四行的内容           |
| :$d   | 删除最后一行的内容         |
| :%d   | 删除所有行的内容           |
| :4,$d | 删除第四行到最后一行的内容 |
| :/6/d | 删除第一个含有6的行        |

### 9.5 替换

| 操作        | 描述                                                         |
| :---------- | :----------------------------------------------------------- |
| :s/a/b      | 替换最后一行的第一个指定的字符(命令末端追加/g替换全部）      |
| :%s/a/b     | (其中%指代所有内容)默认替换每一行的第一个指定的字符(命令末端追加/g替换全部) |
| :4s/a/b     | 替换第四行中第一个 a 为 b                                    |
| :4s/a/bg    | 替换第四行中所有的 a 为 b                                    |
| :4,$s/a/b   | 替换第四行到最后一行中第一个 a 为 b                          |
| :4,$s/a/b/g | 替换第四行到最后一行中所有的 a 为 b                          |
| :$s/a/b     | 替换最后一行中第一个 a 为 b                                  |
| :$s/a/bg    | 替换最后一行所有的 a 为 b                                    |
| :%s/a/b/g   | 将文本中所有的a替换成  b                                     |
| :%s/a/b/gi  | 将文本中所有的 a&A 替换成 b  并忽略a&A的大小写               |
| :%s@a@b@g   | 将文本中所有的 a 替换成 b  (替换时也可以使用@,#,$等符号做分隔符) |

### 9.6 自定义使用环境

在命令行模式下输入

| 操作      | 描述                   |
| --------- | ---------------------- |
| :set nu   | 显示行号               |
| :set nonu | 取消显示行号           |
| :noh      | 取消高亮显示           |
| :qa       | 一次退出所有打开的文件 |

### 9.7 记录功能

创建并编辑文档

```
[root@CentOS-76 ~]# vim a.txt
```

```
a
b
c
d
e
f
```

将光标停留在 1 上，进入正常模式按下 `q1` 进行（ `1` 为记录编号，可用任意数字或字母），按 `i` 进入插入模式输入 test

将光标移至 2，按下 `Esc` 退出正常模式,再按下 `q` 退出记录功能，输入 `5@1` 即可（ `5` 为行数，注意顺序不能颠倒）

```
test1
test2
test3
test4
test5
test6
```

---

Refrences

- [Vim](https://www.vim.org/)
